# 战斗流程协议

`resource/copilot/*.json` 的使用方法及各字段说明

## 完整字段一览

```jsonc
{
    "stage_name": "暴君",           // 关卡名，必选
    "opers": [                      // 指定干员
        {
            "name": "棘刺",         // 干员名

            "skill": 3,             // 技能序号。可选，默认 1，取值范围 [1, 3]

            "skill_usage": 0,       // 技能用法。可选，默认 0
                                    // 0 - 不自动使用（依赖 "actions" 字段）
                                    // 1 - 好了就用，有多少次用多少次（例如干员 棘刺 3 技能、桃金娘 1 技能等）
                                    // 2 - 好了就用，仅使用一次（例如干员 山 2 技能）
                                    // 3 - 自动判断使用时机（画饼.jpg）
                                    // 如果是全自动的技能，填 0

            "requirements": {       // 练度要求。可选，默认为空
                "elite": 2,         // 精英化等级。可选，默认为 0, 不要求精英化等级
                "level": 90,        // 干员等级。可选，默认为 0
                "skill_level": 10,  // 技能等级。可选，默认为 0
                "module": 1,        // 模组编号。可选，默认为 0
                "potentiality": 1   // 潜能要求。可选，默认为 0
            }
        },
    ],
    "groups": [
        {
            "name": "任意正常群奶",  // 群组名，必选
                                    // 自己随便取名字，与下面 deploy 中的 name 对应起来就行

            "opers": [              // 干员任选其一，无序，会优先选练度高的，用法同上述 opers 字段
                {
                    "name": "夜莺",
                    "skill": 3,
                    "skill_usage": 2 // 若是指定时刻，不同的干员技能 cd 可能不同，请留意
                },
                {
                    "name": "白面鸮",
                    "skill": 2,
                    "skill_usage": 2
                }
            ]
        }
    ],
    "actions": [                    // 战斗中的操作。有序，执行完前一个才会去执行下一个。必选
        {
            "type": "部署",         // 操作类型，可选，默认 "Deploy"
                                    // "Deploy" | "Skill" | "Retreat" | "SpeedUp" | "BulletTime" | "SkillUsage"
                                    // "部署"   |  "技能"  |  "撤退"   | "二倍速"   |  "子弹时间"  |  "技能用法"
                                    // 中英文皆可，效果相同
                                    // 若为 "部署", 当费用不够时，会一直等待到费用够（除非 timeout）
                                    // 若为 "技能", 当技能 cd 没转好时，一直等待到技能 cd 好（除非 timeout）
                                    // "二倍速" 是可切换的，即使用一次变成二倍速，再次使用又变回一倍速
                                    // "子弹时间" 即点击任意干员后的 1/5 速度，再进行任意 action 会恢复正常速度

            "kills": 0,             // 击杀数条件，如果没达到就一直等待。可选，默认为 0。直接执行
            // TODO: 其他条件
            // TODO: "condition_type": 0,    // 执行条件间的关系，可选，默认 0
            //                        // 0 - 且； 1 - 或

            "name": "棘刺",         // 干员名 或 群组名， type 为 "部署" | "技能" | "撤退" 之一时必选

            "location": [ 5, 5 ],   // 部署干员的位置。 type 为 "部署" 时必选

            "direction": "左",      // 部署干员的干员朝向。 type 为 "部署" 时必选
                                    // "Left" | "Right" | "Up" | "Down" | "None"
                                    // "左"   |  "右"   | "上"  | "下"   |  "无"
                                    // 中英文皆可，效果相同

            "skill_usage":  1,      // 修改技能用法。当 type 为 "技能用法" 时必选
                                    // 举例：刚下淘金娘需要她帮忙打几个怪，不能自动开技能，中后期平稳了需要她自动开技能
                                    // 则可以在对应时刻设置为 1

            "pre_delay": 0,         // 前置延时。可选，默认 0, 单位毫秒
            "rear_delay": 0,        // 后置延时。可选，默认 0, 单位毫秒

            "timeout": 999999999    // 超时时间。当 type 为 "部署" | "技能" 时可选。默认 INT_MAX, 单位毫秒
                                    // 等待超时则放弃当前动作, 转而执行下一个动作
        },
                                    // 举例 1
        {
            "name": "任意正常群奶",
            "location": [ 5, 6 ],
            "direction": "右"
        },
                                    // 举例 2
        {
            "type": "二倍速"
        }
    ],
    "minimum_required": "v4.0",     // 最低要求 maa 版本号，必选。保留字段
    "desc": {                       // 描述，可选，保留字段。
                                    // 后期完成了作业分享平台后，可能直接展示该字段给其他用户看
        "title": "低练度高成功率作业",
        "details": "对练度要求很低balabala……"
    },
}
```

## 举例

[Sample](../resource/copilot/test.json)  
[GA-EX8 突袭作业](../resource/copilot/GA-EX8-raid.json)
