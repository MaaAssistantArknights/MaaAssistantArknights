# Linux용 에뮬레이터 지원

## 준비과정

### 1. 설치

1. [MAA 사이트](https://maa.plus/)에서 `Linux 动态库`를 다운로드하여 압축을 풉니다.
2. `./MAA-v{VERSION}-linux-{ARCH}/Python/` 경로의 `sample.py`을 엽니다

> **메모**
> 사전 컴파일된 버전은 상대적으로 새로운 디스트리뷰터(Ubuntu 22.04)에 내장되어 있으며, 사용자 환경에서 libstdc++이 너무 오래된 경우 이진 호환성 문제가 발생할 수 있습니다.
> [Linux tutorial](./2.1-LINUX_TUTORIAL.md)을 참조해야 하는 위치 또는 컨테이너 내부에서 실행합니다.

- Arch 기반 디스트리뷰터를 실행중인 경우 Archlinux User Repository의 [maa-assistant-arknights](https://aur.archlinux.org/packages/maa-assistant-arknights) 에서 설치할 수 있습니다. 설치 후 지침에 따라 스크립트를 편집하세요.

### 2. `ADB` 설정

1. Target to [`if asst.connect('adb.exe', '127.0.0.1:5554'):`](https://github.com/MaaAssistantArknights/MaaAssistantArknights/blob/722f0ddd4765715199a5dc90ea1bec2940322344/src/Python/sample.py#L48) ~~마땅히 뭐라고 번역할지 못정함 대신해줘~~
2. `adb` 도구 설정

   - `Android Studio`에 `avd`를 에뮬레이터로 사용하면 직접 사용할 수 있는 `adb` 가 들어 있습니다. `adb.exe`에서 `adb` 경로를 입력하기만 하면 일반적으로 `$HOME/Android/Sdk/platform-tools/` 에서 찾을 수 있습니다. 예시:

   ```python
   if asst.connect("/home/foo/Android/Sdk/platform-tools/adb", "avd_ID"):
   ```

   - 다른 에뮬레이터를 사용할 경우, 먼저 `adb` 를 설치해야합니다. `$ sudo apt install adb` 로 설치한 다음 `adb` 의 경로를 입력하거나 `PATH` 환경변수에 입력한 경우 `adb` 만 입력합니다.
3. 에뮬레이터 `adb` ID 설정

   - adb 도구를 직접 사용할 수 있습니다.: `$ ${adb_path} devices` , 예시.:

   ```shell
   $ /home/foo/Android/Sdk/platform-tools/adb devices
   List of devices attached
   emulator-5554 device
   ```

   - 터미널이 반환하는 `emulator-5554` 는 에뮬레이터 adb의 ID이며며 `127.0.0.1:5555` 를 ID로 바꿉니다. 예시:

   ```python
   if asst.connect("/home/foo/Android/Sdk/platform-tools/adb", "emulator-5554"):
   ```
4. 이제 `$ python3 sample.py` 를 입력하여 ,  `连接成功`(연결성공)을 반환한다면, 설정이 거의 완료되었다는 것을 의미합니다.

### 3. 작업 설정

작업을 커스터마이징 하려면 [AsstAppendTask](https://maa.plus/docs/ko-kr/3.1-INTEGRATION.html#asstappendtask)를 참조하고 `sample.py` 파일의 [`# 任务及参数请参考 docs/集成文档.md`](https://github.com/MaaAssistantArknights/MaaAssistantArknights/blob/722f0ddd4765715199a5dc90ea1bec2940322344/src/Python/sample.py#L54) 섹션을 수정하십시오.

## 에뮬레이터 지원

### ✅ [AVD](https://developer.android.com/studio/run/managing-avds)

요청 사항: 종횡비는 반드시 16:9여야 하며, 해상도는 720p 이상이어야 합니다.

권장 사항: x86\_64 아키텍처 (R - 30 - x86\_64 - Android 11.0)과 MAA에서 `Linux x64 动态库`(동적 라이브러리)를 사용하세요.

### ⚠️ [Genymotion](https://www.genymotion.com/)

고급 버전의 Android에서 네이티브 x86\_64 아키텍처를 사용합니다. 가볍지만 명일방주 실행 중에 쉽게 충돌할 수 있습니다.

우리는 엄격하게 테스트하지 않았지만, adb 기능과 경로에 오류가 없음을 확인했습니다.

## 컨테이너형 안드로이드

> **메모**
> 아래 솔루션들은 특정 커널 모듈에 의존할 수 있으므로 해당 모듈이 설치되어 있는지 확인하십시오.

### ✅ [Waydroid](https://waydro.id/)

종횡비를 16:9로 재설정해야 합니다 (해상도는 720P 이상으로 설정해야 합니다):

```shell
waydroid prop set persist.waydroid.width 1280
waydroid prop set persist.waydroid.height 720
```

재시작 후, `Setting` - `About phone`에서 `IP address`를 기록하고 `sample.py`의 adb IP 주소에 `${IP address}:5555`를 입력하세요.

### ✅ [redroid](https://github.com/remote-android/redroid-doc)

명일방주가 Android 11에서 정상적으로 실행됩니다. adb를 위해 포트 5555를 열어두는 것을 잊지 마세요.
