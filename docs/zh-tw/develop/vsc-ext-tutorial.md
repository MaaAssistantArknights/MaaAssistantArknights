---
order: 8
icon: iconoir:code-brackets
---

# 專用 VS Code 擴充功能教學

此擴充功能針對 MaaAssistantArknights/MaaFramework 提供了一系列便利開發的功能，包括但不限於以下項目：

- `tasks.json` 支援：包含 `template 預覽`、`next 跳轉`、`任務引用` 等。
- 擷取與裁剪圖片。

具體詳細內容可以前往 [擴充功能商店](https://marketplace.visualstudio.com/items?itemName=nekosu.maa-support) 或 [GitHub 倉庫](https://github.com/neko-para/maa-support-extension) 查看。

## 安裝

推薦直接在 VS Code 的擴充功能清單中搜尋 `Maa` 進行安裝。

::: tip
首次使用時，擴充功能會自動下載預設版本的資源。  
搜尋命令 `Maa: 選擇下載源`，可切換下載來源（npm / cnpm）。
:::

## 功能介紹

### 控制面板

左側活動列添加了專用控制面板，圖示如下： ![MaaSupport ControlPanel](/images/maa-support-panel.svg)

擴充功能絕大部分的功能皆基於 `interface.json` 配置。在控制面板最上方可以選擇目前生效的 `interface.json`。

此外，擴充功能具備 `Maa` 相容模式。當在開啟的資料夾下偵測到 `src/MaaCore` 資料夾時，系統會自動啟用該模式。

### 語義化資源分析

透過切換控制面板中的「資源」下拉選單選擇預期資源，擴充功能會根據對應路徑進行索引與診斷。

若發現想編輯的 JSON 檔案沒有出現提示，請檢查目前啟動的資源是否包含該檔案。

> 所謂「任務的定義」，是指任務物件中的鍵 (Key)。
>
> 所謂「任務的引用」，是指其他任務中可以填入任務名稱的值 (Value)（例如 `next` 欄位中）。

#### 查詢任務定義與引用

擴充功能支援跳轉至定義、跳轉至引用，以及查看任務定義。

開啟 `Maa` 相容模式時，可解析 `範本任務`，支援連動父類別查詢任務定義與引用；懸停在任務定義上時，可查看同名的範本圖片。

使用 `Ctrl + T` 快捷鍵，可快速搜尋並跳轉至任務定義。

#### 查詢與開啟圖片

擴充功能支援直接開啟圖片。

開啟 `Maa` 相容模式時，支援圖片路徑的遞迴搜尋。

#### 任務自動補全

擴充功能支援根據所有已知任務進行自動補全。

開啟 `Maa` 相容模式時，輸入 `@` 符號將觸發補全選單。

#### 補全圖片路徑

擴充功能支援根據所有已知圖片路徑進行自動補全。

開啟 `Maa` 相容模式時，支援圖片路徑的遞迴搜尋。

#### 校驗任務與圖片路徑

擴充功能支援定時掃描並分析所有任務：

- 檢查是否有重複命名的任務定義。
- 檢查是否有未知的任務引用。
- 檢查是否有未知的圖片引用。
- 檢查單一任務中是否有重複的任務引用。

#### 多路徑資源支援

擴充功能支援資源包含多個路徑，並會按照指定順序進行邏輯覆蓋，即後載入的內容可以引用到先載入的內容。

### 計算任務 / 任務列表運算式 (僅限 MAA)

透過控制面板，可以計算任務實際展開的內容及其每一項的來源，亦可計算任務列表運算式展開後的結果。

### MaaPiCli 功能 (僅限 MaaFramework 專案)

透過控制面板，可以掃描並選擇控制器、選擇資源、添加並管理任務，以及執行任務。

### 截圖裁剪與快速辨識

在 VS Code 的命令面板中搜尋並執行 `Maa: 開啟截圖工具`，即可開啟 `截圖 / 裁剪` 面板。

> 使用 `Ctrl + Shift + P` (macOS 為 `Command + Shift + P`) 呼叫命令面板。

- 選擇並連線控制器後，可使用「截圖」按鈕直接獲取螢幕截圖。
- 可使用 `上傳` 按鈕手動上傳圖片。
- 按住 `Ctrl` 鍵，框選需要裁剪的區域。
- 使用滑鼠滾輪可進行縮放。
- 裁剪完成後，使用 `下載` 按鈕，可自動將裁剪結果儲存至啟動資源中最頂層的圖片目錄。
- 使用 `複製` 按鈕，可將 ROI 以陣列形式複製到剪貼簿。
- 按下 `工具` 按鈕將開啟辨識工具面板，可直接對當前圖片進行辨識測試。

::: warning
若 OCR 的辨識結果為空，請檢查 [OCR 模型](https://github.com/MaaXYZ/MaaFramework/blob/main/docs/zh_cn/1.1-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.md#%E6%96%87%E5%AD%97%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E6%96%87%E4%BB%B6) 是否配置正確。

針對 MAA，擴充功能將自動維護所使用的模型，您只需要選擇正確的資源即可。
:::

### 日誌查看功能

#### MaaFramework 日誌

在 VS Code 的命令面板中搜尋並執行 `Maa: 開啟 maa 日誌`，可查看偵錯期間產生的 `maa.log` 日誌。

#### MAA Pipeline Support 擴充功能日誌

在 VS Code 的命令面板中搜尋並執行 `Maa: 開啟插件日誌`，可查看擴充功能運作期間產生的 `mse.log` 日誌。

### 底部狀態列

#### MaaSupport <擴充功能版本>

點擊可聚焦至控制面板。

#### MaaFramework <MaaFw版本>

點擊可切換擴充功能使用的 `MaaFramework` 版本。可選擇的版本受限於當前擴充功能支援的範圍，若清單中沒有需要的版本，請考慮更換擴充功能之版本。
