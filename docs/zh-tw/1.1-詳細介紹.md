# MAA使用說明

## 功能介紹

### 刷理智

- 若選項中沒有你需要的關卡，請手動進入遊戲 **藍色開始按鈕** 畫面，並選擇 `當前/上次`。（若當前不處於 **藍色開始按鈕** 畫面，則會自動進入遊戲中「上次作戰」的關卡）
- 主畫面上的 `吃理智`、`吃石頭`、`指定次數`、`指定材料` 四個選項為短路開關，即四個選項中的任一條件達到，均會視為任務完成，停止刷理智。
  - 舉例1：設定 `吃理智藥` : `999`、`吃石頭` : `10`、`指定次數` : `1`。則在刷完 **一次** 後，由於滿足了 `指定次數`:`1` 的條件，視為任務完成，停止刷理智。
  - 舉例2：不勾選 `吃理智藥`、不勾選 `吃石頭`，設定 `指定次數` : `100`。則在當前可用理智全部刷完後（可能只刷了幾次），由於滿足了 `不吃理智藥`、`不吃石頭` 的條件，視為任務完成，停止刷理智。
- 關卡選擇可在 `設定` - `介面設定` 中啟用 `手動輸入關卡名`，支援全部主線關卡 + 原先下拉列表中的關卡，如 `1-7`, `S3-2`, `CE-6` 等
- 支援辨識並顯示材料掉落，且會自動上傳 [企鵝物流資料統計](https://penguin-stats.cn/)，並可設置企鵝物流 ID
- `指定材料` 與 `關卡選擇` 是兩個互相獨立的邏輯：`指定材料` 是用來限制刷取次數的，比如「刷 5 個 固源岩就停」這樣的需求，並不是說你指定了材料就會幫你導航到對應關卡
- 斷線後會重連，繼續刷上次的圖；凌晨 4 點更新後也會重連，繼續刷上次的圖
- 支援剿滅模式自動使用 `全權委託`
- 支援打完升級了的情況；支援代理失敗的情況，會自動放棄本次行動

### 基建換班

#### 換班策略

自動計算並選擇 **單設施內的最優解**，支援所有通用類技能和特殊技能組合；支援辨識經驗書、赤金、源石碎片、芯片，分別使用不同的幹員組合！

#### 基建工作心情閾值

辨識心情進度列的百分比；心情小於該閾值的幹員，不會再去上班，直接進駐宿舍。

#### 特殊說明

- 基建換班目前均為單設施最優解，但非跨設施的全局最優解。例如：`巫戀+龍舌蘭`、`紅雲+稀音` 等這類單設施內的組合，都是可以正常辨識並使用的；`迷迭香`、`紅松騎士團` 這類多個設施間聯動的體系，暫不支援使用。
- 若 `無人機用途` 選擇 `貿易站-龍門幣` ，則將額外辨識是否有 `巫戀組`，並優先為其使用。
- 會客室僅缺一個線索時，會選擇對應流派的幹員；否則會選擇通用幹員。
- 會客室僅當自有線索滿時，才會送出線索，並且只送三個。有需要的同學可自行修改 `resource/tasks.json` 中 `SelectClue` - `maxTimes` 欄位，自定義送出個數。
- 若不希望 `艾麗妮` 等幹員在訓練室未訓練時被進駐到宿舍，可在設定中關閉 `不將已進駐幹員放入宿舍`。但可能會帶來加工站中心情不滿的幹員也不進駐宿舍的問題。
- 控制中樞策略太過複雜，目前只考慮 `阿米婭`、`詩懷雅`、`凱爾希`、`彩虹小隊` 及其他心情 +0.05 的幹員，後續逐步優化。
- 部分異格幹員會在基建內產生衝突，請留意輔助畫面上是否有提示 “幹員衝突”，若有請手動再查看下基建換班情況（可能會有某個設施沒人）

### 公開招募辨識

- 自動公招和公招辨識是兩個獨立的功能！
- 自動公招支援使用 `加急許可`，全自動連續公招！請進入設定中選擇~
- 出 5、6 星都會有彈出通知提示
- 自動公招時自動選取資料上傳 [企鵝物流資料統計](https://penguin-stats.cn/) 和 [素材獲取一圖流](https://yituliu.site/)

### 自動肉鴿功能

- 支援自動辨識幹員及練度，並自動選擇較優幹員及技能
- 支援辨識商店物品，優先購買更厲害的收藏品
- 支援斷線重連、支援凌晨 4 點更新後繼續回去刷
- 如果軟體出現 bug 卡住了，會自動放棄當次探索並重試。但如果經常在某個地方卡住然後放棄、嚴重影響效率的，歡迎提個 issue 回饋一下~

### 自動抄作業

歡迎使用作業分享站 [www.抄作业.com](https://www.抄作业.com), [www.prts.plus](https://www.prts.plus) 分享/使用 作業檔！

#### 抄作業

- 本功能需要在有 `開始行動` 的關卡入口畫面開始執行
- 若需要選擇助戰等，關閉 `自動編隊` 功能，並手動編隊後再開始即可
- 記得在作業分享站上給好用的作業點讚喔！

![image](https://user-images.githubusercontent.com/18511905/189662951-5f9d6d88-3c23-49b3-a58f-c35388b2d5d7.png)

#### 寫作業

- MAA 目錄下有簡易的製作器，可以結合 [文件](3.3-戰鬥流程協議.md) 使用
- 地圖坐標獲取：填寫 `stage_name` 後直接開一局，會在目錄下生成 `map.png`, 可以用於參考。也可參考 [PRTS.map](https://map.ark-nights.com/) 網站，在設定中將 `坐標展示` 修改為 `MAA` 後使用
- 支援演習模式，不用一直浪費理智測試的
- 歡迎使用作業分享站 [www.抄作业.com](https://www.抄作业.com), [www.prts.plus](https://www.prts.plus) 分享/使用 作業檔！
- 推薦在作業描述裡填上你自己的名字（作者名）、參考的攻略影片 url, 其他想說的等等

### 倉庫辨識

初版功能，請從倉庫 `養成材料` 畫面開始功能。目前僅支援導出到幾個資料站，後面可能會用來做一些更實用的功能（畫餅
如您是某個資料站站長，也歡迎聯絡我們適配貴站的材料 JSON 協定~

### 其他亂七八糟的說明

- 主畫面上要執行的任務，是可以拖動改變順序的。同樣設定中基建換班的順序，也是可以拖動改變的。
- 主畫面和設定中更改的配置一般都會自動保存，含有 * 號的選項除外。
- 所有點擊操作，都是點擊按鈕內隨機位置，並模擬卜瓦松分佈（按鈕偏中間位置點的概率大，越往旁邊點到的概率越小）。
- 底層算法純 C++ 開發，並設計了多重的快取技術，最大限度降低 CPU 和記憶體佔用。
- 軟體支援自動更新 ✿✿ヽ(°▽°)ノ✿ 推薦非槓精的同學使用測試版，一般來說更新快且 bug 少（什麼 MIUI (╯‵□′)╯︵┻━┻
- 如果新版本自動下載失敗，可手動下載後，直接把壓縮檔放到同目錄下，會自動更新的。

## 其他功能

若您有多個模擬器等需要雙開、多開同時操作，可將 MAA 資料夾複製多份，使用 **同一個 adb** 及 **不同的 adb 位址** 來進行連接後操作。