# MAA使用説明書

## 詳細な説明

### ステージのクリア

- 欲しいステージがオプションに表示されていない場合は、**青い行動開始**のある画面に手動で入って、オプションで `現在/前回` を選んでください。
- スタート画面の `理性剤使用数`、`割る源石の数`、`周回数指定` の3つのオプションはショートスイッチですので、3つのオプションのいずれかが満たされた場合、それはタスクの完了と見なされます。
  - 例1：`理性剤使用数` : `999`、`割る源石の数` : `10`、`周回数指定` : `1` を設定すると、**一回**クリアした後、`周回数指定` : `1` という条件を満たしたので、タスクの完了と見なされます。
  - 例2：`理性剤使用数` と `割る源石の数` のチェックを外し、`周回数指定` を `100` に設定すると、現在使用可能な理性がすべて使い切った後、`回復剤使う` `源石使う` という条件がないため、タスクの完了となります。
  - 例3：`理性剤使用数` : `999`、`割る源石の数` : `10`に設定すれば、手持ちの理性回復剤と純正源石10個を消費し、理性が不足するまでタスクを実行します。
- `設定` - `UI設定` で`ステージ名を入力する` をチェックした場合, メインストーリーの全ステージ, ドロップダウンのリスト（`1-7`, `S3-2`, `CE-6` など）を選択できます。
- クリアした後[penguin-stats](https://penguin-stats.io/)に自動的にアップロードすることができます。
- penguin-statsのIDはカスタマイズ可能です。
- `素材を限定` と `ステージ` は別のオプションです: `素材を限定` 「中級源岩が5回落ちたらやめる」など。 目標ステージへの誘導などには使えません。（現在JPは後の対応予定）<!-- UIの都合で10章対応予定 -->
- 回線が落ちると、自動的に再接続されてステージのクリアが続けられます。<!-- Wakeup未対応だったような・・・ -->
- 午前4時にリセットされた場合も、自動的に再接続されてステージのクリアを続けます。
- 殲滅作戦もサポートしています。
- クリアした後にドクターレベルがアップした場合でもサポートされています。
- 自動指揮に失敗した場合は、その作戦を自動的に放棄して待機画面へ戻ります。

### 基地のシフトの切り替え

#### ストラテジー

**単一施設内での最適解**を自動的に計算して選択した上で全てのスキルとスキルの組み合わせをサポートしています。
  作戦記録・純金・源石の欠片・SoCに対応したオペレーターの組み合わせを変えて配置することをサポートします！（現在JP未対応）

#### 基地で働く体力をパーセントで指定可能

体力のパーセントを特定し、体力がしきい値未満のオペレーターは出勤せず、宿舎に直行します。（現在JP未対応）

#### 特別な注意事項

- 基地のシフトは現時点では単一施設内での最適解ですが、施設全体の最適解ではありません。
  例えば、`シャマレ+テキーラ`、`ヴァーミル+シーン` などの組み合わせは認識され、通常どおり使用できます；`ロスモンティス`、`レッドパイン騎士団(フレイムテイル/ファートゥース/ワイルドメイン/アッシュロック)` などの多くの施設間で連携する組合せは一時的にサポートできません。（現在JP未対応）

- `ドローンの使用` で `貿易所-龍門幣` を選択した場合。 `シャマレの組合せ` があるかどうかを識別し、最初に使用します。（現在JP未対応）

- 応接室の手がかりが1つだけ欠けている場合は、該当するスキルのあるオペレーターが選ばれ、そうでない場合は一般オペレーターが選ばれます。（現在JP未対応）
- 応接室は自分の手がかりが溢れた際、手がかり3つのみを譲り渡します。必要な場合、`resource/tasks.json` の `SelectClue` - `maxTimes` フィールドを変更して、譲渡する数をカスタマイズできます。
- 訓練所を使用していない場合 `Irene` などのオペレーターを宿舎に移動させたくない場合は、設定で `作業中のオペレーターを宿舎に移動しない` にチェックしてください。 ただし、この場合、疲労が蓄積していないオペレータも宿舎に入れなくなる可能性があります。（現在JP未対応）
- 制御中枢のストラテジーが複雑すぎるため。現在では `アーミヤ` `スワイヤー` `ケルシー` `レインボー小隊` および体力値が+0.05のスキルのオペレーターのみが考慮されており、今後徐々に最適化される予定です。（現在JP未対応）
- 一部の異格オペレーターは基地で競合します。スタート画面の右側のプロンプトに `オペレーターが競合した` と表示されていないか注意してください。表示されている場合、基地のシフトを手動で確認してください（該当する施設に誰もいない可能性があります）。（現在JP未対応）

### 公開求人認識

- `スタート画面の公開求人` と `公開求人認識` は別々の2つの機能です！
- 公開求人は `緊急招集票` が利用でき、自動的に継続して求人が行われます！設定でオプションと動作を選択してください。
- 星5または星6が確定した場合、ポップアップ通知が表示されます。
- `スタート画面の公開求人` 中に[PenguinStats](https://penguin-stats.io/)と[Yituliu](https://yituliu.site/)へ公開求人データを自動的にアップロードすることができます。

### 自動統合戦略（ローグライク）

- 設定で選択できるオプション

  - キャンドルを集めて、できるだけクリアする：キャンドルを集めるために、できるだけ多くのステージをクリアする。
  - 源石錐を集めて、1階旅商人に出会った後止める：源石錐を集めるための最も効率的なモードです。 `EASY` モードを手動で選択することをお勧めします。
  <!-- - 源石錐を集めて、投資した後に止める：キャンドルと源石錐の両方の収集を考慮したモード。 --><!-- 今選択肢にないので隠す -->

- 統合戦略はオペレーターと昇進/レベルの自動識別をサポートしており、最適なオペレーターとスキルを自動的に選択することができます。
- 回線が落ちた場合や午前4時にリセットされた場合は、自動的に再接続されて続きから始めます。
- アプリがバグで立ち往生した場合は、現在の冒険を自動的に放棄して再試行します。しかし、どこかで行き詰まって放棄してしまい、効率に深刻な影響を与えることが多い場合は、issueを提出してフィードバックをお寄せください。

### 自動戦闘（現在JP未対応）

自動攻略ファイルのシェアは大歓迎です！
 
  [www.抄作业.com](https://www.抄作业.com) か [www.prts.plus](https://www.prts.plus) をご利用ください!

#### 使い方

- この機能は、`行動開始` のある画面で開始する必要があります。
- サポートを選択する必要がある場合は、`自動編成` オプションをオフにして、手動で編成を決定してから開始してください。
- 役に立ったと思うデータには「いいね！」を押してください。

![image](https://user-images.githubusercontent.com/18511905/189662951-5f9d6d88-3c23-49b3-a58f-c35388b2d5d7.png)

#### 攻略ファイルの作成

- exeと同じディレクトリに簡易メーカーがあり、[自動作戦API](../ja-jp/3.3-自動作戦API.md)と一緒に使用できます。
- マップ座標の取得: `stage_name` を入力して起動すると、ディレクトリ内に `map.png` が生成されます。もしくは [PRTS.map](https://map.ark-nights.com/)  の `設定` から座標を `MAA` に変更しても構いません。
- 演習モードをサポートしているため、テストの際には理性を無駄にする必要はありません。
- ファイルのシェアは大歓迎です！ [www.抄作业.com](https://www.抄作业.com) か [www.prts.plus](https://www.prts.plus) をご利用ください!
- 説明文には、自分の名前（作者名）、参考動画のURL、その他言いたいことなどを記入することをお勧めします

### 倉庫アイテム認識

(ベータ機能) **倉庫を開いた後、素材のタブを選択してから**認識開始を選択してください。現在は複数のデータサイトへの書き出しのみ対応しています。今後、さらに機能を追加していく予定です。
JSONスキーマとの連携をご希望の方は、お気軽にお問い合わせください。

- 現在の対応データサイト

  Arkplanner/JSON

  [Arkplanner](https://penguin-stats.io/planner) / [ARK-NIGHTS.com](https://ark-nights.com/settings)

  Lolicon/JSON

  [アークナイツ ツールボックス](https://arkn.lolicon.app/#/material)

### その他の注意事項

- スタート画面の左側のタスクのタグは、ドラッグして順序を変更できます。同様に、設定の基地設定のタグの順番もドラッグで変更可能です。
- スタートと設定画面で変更された構成は、「*」でマークされたオプションを除いて、自動的に保存されます。
- すべてのクリック操作は、ボタン内のランダムな位置でのクリックであり、ポアソン分布をシミュレートします（ボタンの中心がクリックされる確率が高く、中心から離れるほどクリックされる確率が小さくなります）。
- 基礎となるアルゴリズムは純粋なC++で開発され、CPUとメモリの使用を最小限に抑えるように複数のキャッシュテクで設計されています。
- アプリは自動敵に更新がサポートされます✿✿ヽ(°▽°)ノ✿、気にならないユーザーはベータ版の使用をお勧めします（更新も速く、バグもほとんどありません）。
- 新しいバージョンの自動ダウンロードが失敗した場合は、パッケージを手動でダウンロードして同じディレクトリに配置すると、自動的に更新されます。

## その他の機能

複数のエミュレータを起動する必要がある場合、MAAフォルダをコピーし、**同じADBアドレス** と **異なるADBアドレス** を使用して接続してください。
